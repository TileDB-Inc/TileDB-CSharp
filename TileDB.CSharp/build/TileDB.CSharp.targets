<?xml version="1.0" encoding="utf-8"?>
<Project>
  <!-- 
    'Grpc_SkipNativeLibsCopy' should not be enabled in normal use.
    It only exists to support special scenarios where user wants to copy the native libraries
    to output directory themselves, in a separate build step or script.
    Only use this flag if you really know what you're doing. It's your responsibility to ensure that matching versions of 
    the Grpc.Core.dll assembly and the native libraries are used at all times.
  -->
  <ItemGroup Condition="'$(Configuration)|$(Platform)'=='Release|x64' and '$(OS)' == 'Windows_NT'">
    <Content Include="$(MSBuildThisFileDirectory)..\runtimes\win-x64\native\tiledb.dll">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      <Link>tiledb.dll</Link>
      <Visible>false</Visible>
      <NuGetPackageId>TileDB.CSharp</NuGetPackageId>
    </Content>
    <Content Include="$(MSBuildThisFileDirectory)..\runtimes\win-x64\native\tiledbcs.dll">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      <Link>tiledbcs.dll</Link>
      <Visible>false</Visible>
      <NuGetPackageId>TileDB.CSharp</NuGetPackageId>
    </Content>    
  </ItemGroup>

  <ItemGroup Condition=" '$(OS)' == 'Unix' and '$([System.Runtime.InteropServices.RuntimeInformation]::IsOSPlatform($([System.Runtime.InteropServices.OSPlatform]::Linux)))' ">      
    <Content Include="$(MSBuildThisFileDirectory)..\runtimes\linux-x64\native\libtiledb.so">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      <Link>libtiledb.so</Link>
      <Visible>false</Visible>
    </Content>
    <Content Include="$(MSBuildThisFileDirectory)..\runtimes\linux-x64\native\tiledbcs.so">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      <Link>tiledbcs.so</Link>
      <Visible>false</Visible>
    </Content> 
  </ItemGroup>

  <ItemGroup Condition=" '$(OS)' == 'Unix' and '$([System.Runtime.InteropServices.RuntimeInformation]::IsOSPlatform($([System.Runtime.InteropServices.OSPlatform]::OSX)))' ">       
    <Content Include="$(MSBuildThisFileDirectory)..\runtimes\osx-x64\native\libtiledb.dylib">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      <Link>libtiledb.dylib</Link>
      <Visible>false</Visible>
    </Content>
    <Content Include="$(MSBuildThisFileDirectory)..\runtimes\osx-x64\native\tiledbcs.dylib">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      <Link>tiledbcs.dylib</Link>
      <Visible>false</Visible>
    </Content>            
  </ItemGroup>
</Project>
